#--------------------------------------------------------------------------
# Môi trường & Debug
#--------------------------------------------------------------------------
APP_NAME=Bault
APP_ENV=local
APP_DEBUG=true
APP_KEY=base64:tCv7I073G96Wx5Dxwp/UJY8aMWN3IK6jwVDthkVRkYE=
APP_URL=http://localhost:${NGINX_HOST_PORT}
VITE_DEV_URL=http://localhost:${VITE_HOST_PORT}

#--------------------------------------------------------------------------
# Cổng Host cho các dịch vụ Docker
#--------------------------------------------------------------------------
NGINX_HOST_PORT=888
PMA_HOST_PORT=8080
VITE_HOST_PORT=5173
CENTRIFUGO_HOST_PORT=8000

#--------------------------------------------------------------------------
# Cấu hình Database & Replication
#--------------------------------------------------------------------------
DB_CONNECTION=mysql
DB_HOST=db
DB_PORT=3306
DB_DATABASE=bault
DB_USERNAME=root
DB_ROOT_PASSWORD=secret

DB_READ_HOST=db_read
DB_POOL_ENABLED=mysql
DB_SSLMMODE=disable

MYSQL_REPLICATION_USER=replica_user
MYSQL_REPLICATION_PASSWORD=replica_secret

#--------------------------------------------------------------------------
# Cấu hình Cache, Session, Queue
#--------------------------------------------------------------------------
CACHE_DRIVER=redis
SESSION_DRIVER=database
QUEUE_CONNECTION=redis

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_CLIENT=phpredis

#--------------------------------------------------------------------------
# Cấu hình dịch vụ
#--------------------------------------------------------------------------
USER_DEFAULT_ROLE=user
USER_REGISTRATION_OPEN=true

RPC_SECRET_TOKEN=f6e4d0c95b684e30a58d3ea6cb78d4100c0e7b0f2d2a1ab35c02ae93b65d0dfc

#--------------------------------------------------------------------------
# Cookie
#--------------------------------------------------------------------------

SESSION_LIFETIME=43200  
SESSION_COOKIE=bault_session
SESSION_SECURE_COOKIE=false 
SESSION_SAME_SITE=lax

#--------------------------------------------------------------------------
# Cấu hình Swoole Server
#--------------------------------------------------------------------------
SWOOLE_HOST=0.0.0.0
SWOOLE_PORT=9501
SWOOLE_DAEMONIZE=false
SWOOLE_WORKER_NUM=8
SWOOLE_TASK_WORKER_NUM=8
SWOOLE_LOG_LEVEL=3
SWOOLE_MAX_REQUEST=100000
SWOOLE_MAX_CONN=20000

SWOOLE_WATCH_USE_POLLING=true

DB_POOL_ENABLED=true
REDIS_POOL_ENABLED=true

# .env
MAIL_MAILER=smtp
MAIL_HOST=sandbox.smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=your_mailtrap_username
MAIL_PASSWORD=your_mailtrap_password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="contact@bault.dev"
MAIL_FROM_NAME="${APP_NAME}"

#--------------------------------------------------------------------------
# Cấu hình Connection Pool & Circuit Breaker
#--------------------------------------------------------------------------
# DB Pool
DB_POOL_ENABLED=true
DB_POOL_WORKER_SIZE=10
DB_POOL_TASK_SIZE=10
DB_POOL_HEARTBEAT=60

# DB Circuit Breaker
DB_CIRCUIT_BREAKER_ENABLED=true
DB_CIRCUIT_BREAKER_STORAGE=redis
DB_CIRCUIT_BREAKER_FAILURE_RATE=50
DB_CIRCUIT_BREAKER_MIN_REQUESTS=10
DB_CIRCUIT_BREAKER_TIME_WINDOW=60
DB_CIRCUIT_BREAKER_TIMEOUT=30

# Redis Pool
REDIS_POOL_ENABLED=true
REDIS_CONNECTION=default
REDIS_POOL_WORKER_SIZE=10
REDIS_POOL_TASK_SIZE=10

# Redis Circuit Breaker
REDIS_CIRCUIT_BREAKER_ENABLED=true
REDIS_CIRCUIT_BREAKER_STORAGE=redis
REDIS_CIRCUIT_BREAKER_STRATEGY=rate
REDIS_CIRCUIT_BREAKER_THRESHOLD=5
REDIS_CIRCUIT_BREAKER_TIMEOUT=30
REDIS_CIRCUIT_BREAKER_FAILURE_RATE=50
REDIS_CIRCUIT_BREAKER_MIN_REQUESTS=10
REDIS_CIRCUIT_BREAKER_TIME_WINDOW=60