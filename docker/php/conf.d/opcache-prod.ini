; Đây là file cấu hình OPcache được TỐI ƯU HÓA cho môi trường PRODUCTION.
; Các giá trị này vô hiệu hóa việc kiểm tra file và kích hoạt preloading
; để đạt được hiệu năng cao nhất.

opcache.enable=1
opcache.enable_cli=1 ; Rất quan trọng cho các ứng dụng chạy dài hạn như Swoole/RoadRunner

; --- Performance Settings for Production ---
opcache.validate_timestamps=0 ; [PROD] Không kiểm tra timestamp của file, luôn dùng cache.
opcache.revalidate_freq=0     ; [PROD] Không kiểm tra lại file.
opcache.save_comments=1       ; Bắt buộc đối với các framework sử dụng Annotation/Attribute.
opcache.fast_shutdown=1       ; Tăng tốc quá trình shutdown của PHP.

; --- Memory and File Cache Settings ---
opcache.memory_consumption=256      ; Tăng bộ nhớ cho OPcache, tùy chỉnh theo kích thước dự án.
opcache.interned_strings_buffer=16  ; Tăng buffer cho chuỗi.
opcache.max_accelerated_files=20000 ; Tăng số lượng file có thể cache, tùy chỉnh theo dự án.

; --- PHP 8 JIT (Just-In-Time) Compilation ---
opcache.jit_buffer_size=128M
opcache.jit=tracing

; --- OPcache Preloading ---
; Kích hoạt preloading để có hiệu năng tối đa.
opcache.preload=/app/preload.php