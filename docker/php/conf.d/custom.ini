; Đây là file cấu hình PHP tùy chỉnh cho môi trường Docker.
; Các giá trị ở đây sẽ ghi đè lên cấu hình mặc định của image PHP.

; --- Cấu hình báo cáo lỗi ---
; Trong môi trường development, chúng ta muốn thấy tất cả các lỗi NGOẠI TRỪ các thông báo (Notice).
; Các Notice như "undefined index" hoặc "use statement has no effect" thường không phải là lỗi nghiêm trọng
; và việc chuyển chúng thành Exception có thể làm gián đoạn quy trình làm việc (ví dụ: migrations).
; Cấu hình này giúp môi trường ổn định hơn.
; Để log toàn bộ lỗi, kể cả các thông báo nhỏ nhất, hãy sử dụng E_ALL.
error_reporting = E_ALL

; --- Cài đặt chung ---
date.timezone = "UTC"
memory_limit = 512M

; --- Cài đặt Upload ---
upload_max_filesize = 50M
post_max_size = 50M

; --- Cấu hình OPcache cho Production ---
; OPcache cải thiện đáng kể hiệu năng của PHP bằng cách lưu trữ precompiled script bytecode
; trong bộ nhớ chia sẻ, qua đó loại bỏ sự cần thiết phải tải và phân tích kịch bản trên mỗi yêu cầu.
opcache.enable=1
opcache.enable_cli=1 ; Rất quan trọng cho các ứng dụng chạy dài hạn như Swoole/RoadRunner
opcache.memory_consumption=128
opcache.interned_strings_buffer=8
opcache.max_accelerated_files=10000
opcache.revalidate_freq=0 ; Trong production, không cần kiểm tra thay đổi file
opcache.validate_timestamps=0 ; Tắt kiểm tra timestamp để có hiệu năng tối đa
opcache.save_comments=1 ; Bắt buộc đối với các framework sử dụng Annotation/Attribute
opcache.fast_shutdown=1

; --- OPcache Preloading ---
; opcache.preload=/app/preload.php ; Vô hiệu hóa preloading để đảm bảo graceful reload hoạt động chính xác với Swoole.
