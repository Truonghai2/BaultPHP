#--------------------------------------------------------------------------
# Môi trường & Debug
#--------------------------------------------------------------------------
APP_NAME=Bault
APP_ENV=local
APP_DEBUG=true
APP_KEY=
APP_URL=http://localhost:${NGINX_HOST_PORT}
VITE_DEV_URL=http://localhost:${VITE_HOST_PORT}

#--------------------------------------------------------------------------
# Cổng Host cho các dịch vụ Docker
#--------------------------------------------------------------------------
NGINX_HOST_PORT=88
PMA_HOST_PORT=8080
VITE_HOST_PORT=5173
CENTRIFUGO_HOST_PORT=8000

#--------------------------------------------------------------------------
# Cấu hình Database & Replication
#--------------------------------------------------------------------------
DB_CONNECTION=mysql
DB_HOST=db
DB_PORT=3306
DB_DATABASE=bault
DB_USERNAME=root
DB_ROOT_PASSWORD=secret # Mật khẩu này được sử dụng cho root user của DB và cho ứng dụng.

DB_READ_HOST=db_read

# User dùng cho việc replication giữa DB chính và DB đọc
MYSQL_REPLICATION_USER=replica_user
MYSQL_REPLICATION_PASSWORD=replica_secret

#--------------------------------------------------------------------------
# Cấu hình Cache, Session, Queue
#--------------------------------------------------------------------------
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_CLIENT=phpredis

#--------------------------------------------------------------------------
# Cấu hình dịch vụ
#--------------------------------------------------------------------------
EDITOR=vscode
USER_DEFAULT_ROLE=user
USER_REGISTRATION_OPEN=true



# RPC (nếu có)
RPC_SECRET_TOKEN=f6e4d0c95b684e30a58d3ea6cb78d4100c0e7b0f2d2a1ab35c02ae93b65d0dfc

# Centrifugo
CENTRIFUGO_API_URL=http://centrifugo:8000/api
CENTRIFUGO_API_KEY=c3BhdWx0X2FwaV9rZXlfZm9yX2RldmVsb3BtZW50X3B1cnBvc2Vz
CENTRIFUGO_ADMIN_PASSWORD=admin_password_for_ui
CENTRIFUGO_ADMIN_SECRET=YWRtaW5fc2VjcmV0X2Zvcl9zZWN1cmluZ190aGVfYWRtaW5fd2ViX3Vp

#--------------------------------------------------------------------------
# Cấu hình Swoole Server
#--------------------------------------------------------------------------
SWOOLE_HOST=0.0.0.0
SWOOLE_PORT=9501
SWOOLE_DAEMONIZE=false
SWOOLE_WORKER_NUM=8
SWOOLE_TASK_WORKER_NUM=8
SWOOLE_LOG_LEVEL=3
SWOOLE_MAX_REQUEST=100000
SWOOLE_MAX_CONN=20000

#--------------------------------------------------------------------------
# Cấu hình Mail
#--------------------------------------------------------------------------
MAIL_MAILER=smtp
MAIL_HOST=sandbox.smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=your_mailtrap_username
MAIL_PASSWORD=your_mailtrap_password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="no-reply@bault.dev"
MAIL_FROM_NAME="${APP_NAME}"

#--------------------------------------------------------------------------
# Cấu hình Connection Pool & Circuit Breaker
#--------------------------------------------------------------------------
# DB Pool
DB_POOL_ENABLED=true
DB_POOL_WORKER_SIZE=10
DB_POOL_TASK_SIZE=10
DB_POOL_HEARTBEAT=60

# DB Circuit Breaker
DB_CIRCUIT_BREAKER_ENABLED=true
DB_CIRCUIT_BREAKER_STORAGE=redis
DB_CIRCUIT_BREAKER_FAILURE_RATE=50
DB_CIRCUIT_BREAKER_MIN_REQUESTS=10
DB_CIRCUIT_BREAKER_TIME_WINDOW=60
DB_CIRCUIT_BREAKER_TIMEOUT=30

# Redis Pool
REDIS_POOL_ENABLED=true
REDIS_CONNECTION=default
REDIS_POOL_WORKER_SIZE=10
REDIS_POOL_TASK_SIZE=10

# Redis Circuit Breaker
REDIS_CIRCUIT_BREAKER_ENABLED=true
REDIS_CIRCUIT_BREAKER_STORAGE=redis
REDIS_CIRCUIT_BREAKER_STRATEGY=rate
REDIS_CIRCUIT_BREAKER_THRESHOLD=5
REDIS_CIRCUIT_BREAKER_TIMEOUT=30
REDIS_CIRCUIT_BREAKER_FAILURE_RATE=50
REDIS_CIRCUIT_BREAKER_MIN_REQUESTS=10
REDIS_CIRCUIT_BREAKER_TIME_WINDOW=60